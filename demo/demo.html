<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>DEMO BCTE - Before Close Tab Event 2</title>

    <link rel="import" href="normal/menu.html">

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/css/bootstrap.min.css" integrity="sha384-rwoIResjU2yc3z8GV/NPeZWAv56rSmLldC3R/AZzGRnGxQQKnKkoFVhFQhNUwEyJ" crossorigin="anonymous">
    <link rel="stylesheet" href="css/style.css">
</head>
<body>

<h1>Here will be demo-html</h1>




<script>
    var link = document.querySelector('link[rel=import]');
    var content = link.import.querySelector('.main_menu');
    document.body.appendChild(content.cloneNode(true));
</script>



<p>Возможности скрипта</p>
<ul>
    <li>Определяет положение курсора, реагирует, когда pageY меньше 0 (курсор в зоне с вкладками)</li>
    <li>Устанавливает куки на выбранной странице</li>
    <li>Проверяет наличие куки (при заходе и/или по таймеру)</li>
    <li>Устанавливает время жизни куки</li>
    <li>Событие может быть удалено при достижении какого-то времени</li>
</ul>


<p>Параметры которые можно менять</p>
<ul>
    <li>Название установленной куки и ее значение</li>
    <li>Время жизни куки</li>
    <li>Ссылка на сравниваемую страницу</li>
</ul>

<p>Порядок выполнения</p>
<ol>
    <li>Получаем текущую дату для будущего определения времени жищни куки</li>
    <li>Добавляем слушатель на объект window</li>
    <li>При желании добавляем функцию, убирающую обработчик через N секунд </li>
    <li>Проверяем куки, есил их нет, то ставим unvisited. </li>
    <li>При перемещении курсора за пределы сайта происходит проверка:
        <ul>
            <li>Находится ли курсор в выше области сайта ( e.pageY ) </li>
            <li>У курсора отсутствует хтмл-цель  ( e.relatedTarget === null ) </li>
            <li>Значение куки равно getcookie('yourName') === null </li>
        </ul>
        Если все проверки пройдены, то выполняется желаемое действие.
    </li>
    <li>Для того чтобы снять куки после того, как клиент выполнил цель (посещение страницы) мы проверяем
    текущий адреси сравниваем с заданным ранее.
        <ul> Если адрес совпал, то:
            <li>Если куки не являются пустыми, то ничего не происходит</li>
            <li>Иначе - устанавливаем куки на время, заданное вначале </li>
        </ul>
    </li>

</ol>

<p>Используемые функции</p>
<ul>
    <li>urlCheker - проверяет текущую страницу, внутри - проверяет установленные куки</li>
    <li>windowPopUp - делает что-то при наведении курсора на верхнюю часть экранаю.<br>
        e.relatedTarget === null - значает, что курсор не находится над каким-либо объектом.
    </li>
    <li>cookTimer - проверяет наличие куки в режиме реального времени</li>
    <li>getcookie - (сторонняя функция) проверяет наличие куки в браузере</li>
    <li>setCookie - (сторонняя функция) позволяет записать куки</li>
</ul>

<!-- Button trigger modal -->
<button type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModal">
    Launch demo modal
</button>

<!-- Modal -->
<div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Modal title</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                ...
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Просто закрыть</button>
            </div>
        </div>
    </div>
</div>


<script src="https://code.jquery.com/jquery-3.1.1.slim.min.js" integrity="sha384-A7FZj7v+d/sdmMqp/nOQwliLvUsJfDHW+k9Omg/a/EheAdgtzNs3hpfag6Ed950n" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.4.0/js/tether.min.js" integrity="sha384-DztdAPBWPRXSA/3eYEEUWrWCy7G5KFbe8fFjk5JAIxUYHKkDx6Qin1DkWx51bBrb" crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/js/bootstrap.min.js" integrity="sha384-vBWWzlZJ8ea9aCX4pEW3rVHjgjt7zpkNpZk+02D9phzyeVkE+jo0ieGizqPLForn" crossorigin="anonymous"></script>


<script src="../dist/bcte.js"></script>

</body>
</html>